<!doctype html>
{% extends "base.html" %}

{% block pagetitle %}{{ ownerName }}s Wunschzettel - {% endblock %}
{% block header %}{{ ownerName }}s Wunschzettel{% endblock %}
{% block content %}
    {% if noSpoiler %}
    <a href="/yesSpoiler">Spoiler anzeigen</a>
    <details>
        <summary>Stats</summary>
        Erledigte WÃ¼nsche: {{ stats['fulfilled'] }}/{{ stats['count'] }}
    </details>
    {% endif %}
    {% for wish in orderedWishlist %}
        <article>
            {% if wish.isFulfilled() and ((not noSpoiler) or (wish.hasMatchingSecretIn(userFulfilledWishes))) %}<del>{% endif %}
                <h3>
                    {% if wish.link %}
                        <a href="{{ wish.link }}">{{ wish.title }}</a>
                    {% else %}
                        {{ wish.title }}
                    {% endif %}
                    {% if wish.isFulfilled() and (wish.hasMatchingSecretIn(userFulfilledWishes)) %}
                        (schenkst du)
                    {% elif wish.isFulfilled() and (not noSpoiler) %}
                        (wird schon geschenkt)
                    {% endif %}
                </h3>
                {% if wish.desc %}
                    <p>
                        {{ wish.desc }}
                    </p>
                {% endif %}
                {% if wish.link %}
                    <p>
                        <a class="shop-link" href="{{ wish.link }}">Ansehen auf {{ wish.getLinkDomain() }}</a>
                    </p>
                {% endif %}
                {% if (not wish.isFulfilled()) or (noSpoiler and (not (wish.hasMatchingSecretIn(userFulfilledWishes)))) %}
                    <p>
                        <a class="fulfill-button" href="/wishes/{{ wish.id }}">Das schenke ich!</a>
                    </p>
                {% endif %}
            {% if wish.isFulfilled() and ((not noSpoiler) or (wish.hasMatchingSecretIn(userFulfilledWishes))) %}</del>{% endif %}
            {% if wish.hasMatchingSecretIn(userFulfilledWishes) %}
                <p>
                    <a class="reopen-button" href="/wishes/{{ wish.id }}/{{ wish.secret }}">Wunsch wieder als offen markieren</a>
                </p>
            {% endif %}
        </article>
    {% endfor %}
{% endblock %}